# ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€N1 Interview Systemã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨å®Ÿè£…ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚
SaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯æœ€å„ªå…ˆäº‹é …ã§ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

1. [ç’°å¢ƒå¤‰æ•°ç®¡ç†](#ç’°å¢ƒå¤‰æ•°ç®¡ç†)
2. [APIã‚­ãƒ¼ç®¡ç†](#apiã‚­ãƒ¼ç®¡ç†)
3. [ãƒ¬ãƒ¼ãƒˆåˆ¶é™](#ãƒ¬ãƒ¼ãƒˆåˆ¶é™)
4. [èªè¨¼ãƒ»èªå¯](#èªè¨¼èªå¯)
5. [ãƒ‡ãƒ¼ã‚¿ä¿è­·](#ãƒ‡ãƒ¼ã‚¿ä¿è­·)
6. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)
7. [ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ](#ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ)

## ç’°å¢ƒå¤‰æ•°ç®¡ç†

### âœ… ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **çµ¶å¯¾ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„**
   ```bash
   # .gitignoreã«å¿…ãšå«ã‚ã‚‹
   .env
   .env.local
   .env.production
   .env.*
   ```

2. **ç’°å¢ƒã”ã¨ã®åˆ†é›¢**
   ```
   .env.development    # é–‹ç™ºç’°å¢ƒ
   .env.staging        # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
   .env.production     # æœ¬ç•ªç’°å¢ƒ
   ```

3. **ç’°å¢ƒå¤‰æ•°ã®æ¤œè¨¼**
   ```typescript
   // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«å®Ÿè¡Œ
   import { validateEnvironmentVariables } from '@/lib/env-validator';
   validateEnvironmentVariables();
   ```

### âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è­¦å‘Š

- `NEXT_PUBLIC_`ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®å¤‰æ•°ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã«éœ²å‡ºã—ã¾ã™
- ç§˜å¯†æƒ…å ±ã«ã¯çµ¶å¯¾ã«`NEXT_PUBLIC_`ã‚’ä½¿ç”¨ã—ãªã„
- APIã‚­ãƒ¼ã‚„ç§˜å¯†éµã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®ã¿ã§ä½¿ç”¨

## APIã‚­ãƒ¼ç®¡ç†

### ğŸ”‘ APIã‚­ãƒ¼ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

å®šæœŸçš„ãªAPIã‚­ãƒ¼ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿæ–½ï¼š

1. **æœˆæ¬¡ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³æ¨å¥¨**
   - OpenAI APIã‚­ãƒ¼
   - Stripe APIã‚­ãƒ¼
   - ãã®ä»–ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£APIã‚­ãƒ¼

2. **å³åº§ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å¿…è¦ãªå ´åˆ**
   - ã‚­ãƒ¼ã®æ¼æ´©ãŒç–‘ã‚ã‚Œã‚‹å ´åˆ
   - å¾“æ¥­å“¡ã®é€€è·æ™‚
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»å¾Œ

### ğŸ›¡ï¸ APIã‚­ãƒ¼ã®ä¿è­·

1. **Vercelç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨**
   ```bash
   vercel env add OPENAI_API_KEY production
   ```

2. **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹ã®æ¤œè¨**
   - HashiCorp Vault
   - AWS Secrets Manager
   - Azure Key Vault

3. **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™**
   - æœ€å°æ¨©é™ã®åŸå‰‡
   - IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆè¨­å®š
   - APIã‚­ãƒ¼ã®ã‚¹ã‚³ãƒ¼ãƒ—åˆ¶é™

## ãƒ¬ãƒ¼ãƒˆåˆ¶é™

### å®Ÿè£…æ¸ˆã¿ãƒ¬ãƒ¼ãƒˆåˆ¶é™

```typescript
// src/lib/rate-limiter.ts
const limits = {
  standard: { windowMs: 60000, maxRequests: 60 },
  strict: { windowMs: 60000, maxRequests: 10 },
  search: { windowMs: 60000, maxRequests: 30 },
  interview: { windowMs: 60000, maxRequests: 100 },
  report: { windowMs: 300000, maxRequests: 5 }
};
```

### ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®é©ç”¨

```typescript
// APIãƒ«ãƒ¼ãƒˆã§ã®ä½¿ç”¨ä¾‹
import { rateLimiters } from '@/lib/rate-limiter';

export async function POST(request: NextRequest) {
  const identifier = getClientIdentifier(request);
  const result = await rateLimiters.strict.check(identifier);
  
  if (!result.allowed) {
    return NextResponse.json(
      { error: 'Too many requests' },
      { status: 429 }
    );
  }
  
  // å‡¦ç†ã‚’ç¶šè¡Œ
}
```

## èªè¨¼ãƒ»èªå¯

### Firebase Authè¨­å®š

1. **Multi-Factor Authentication (MFA)**
   ```typescript
   // MFAæœ‰åŠ¹åŒ–ã‚’æ¨å¥¨
   await user.multiFactor.enroll(multiFactorAssertion);
   ```

2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 24æ™‚é–“
   - ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³: 30æ—¥
   - åŒæ™‚ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¶é™ã®å®Ÿè£…

3. **æ¨©é™ç®¡ç†**
   ```typescript
   // ã‚«ã‚¹ã‚¿ãƒ ã‚¯ãƒ¬ãƒ¼ãƒ ã§ã®æ¨©é™ç®¡ç†
   await adminAuth.setCustomUserClaims(uid, {
     role: 'admin',
     organizationId: 'org123'
   });
   ```

## ãƒ‡ãƒ¼ã‚¿ä¿è­·

### æš—å·åŒ–

1. **è»¢é€ä¸­ã®æš—å·åŒ–**
   - HTTPSå¿…é ˆï¼ˆTLS 1.3æ¨å¥¨ï¼‰
   - HSTSæœ‰åŠ¹åŒ–

2. **ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–**
   ```typescript
   // é‡è¦ãƒ‡ãƒ¼ã‚¿ã®æš—å·åŒ–ä¾‹
   import crypto from 'crypto';
   
   const algorithm = 'aes-256-gcm';
   const key = Buffer.from(process.env.ENCRYPTION_KEY, 'hex');
   
   function encrypt(text: string): string {
     const iv = crypto.randomBytes(16);
     const cipher = crypto.createCipheriv(algorithm, key, iv);
     // ... æš—å·åŒ–å‡¦ç†
   }
   ```

### å€‹äººæƒ…å ±ä¿è­·

1. **GDPRæº–æ‹ **
   - ãƒ‡ãƒ¼ã‚¿åé›†ã®æ˜ç¤ºçš„åŒæ„
   - ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£
   - å¿˜ã‚Œã‚‰ã‚Œã‚‹æ¨©åˆ©ã®å®Ÿè£…

2. **ãƒ‡ãƒ¼ã‚¿æœ€å°åŒ–**
   - å¿…è¦æœ€å°é™ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿åé›†
   - å®šæœŸçš„ãªãƒ‡ãƒ¼ã‚¿å‰Šé™¤
   - ã‚¢ãƒãƒ‹ãƒã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒã‚§ãƒƒã‚¯

- [ ] ç’°å¢ƒå¤‰æ•°ã®æ¤œè¨¼ãŒæœ‰åŠ¹
- [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãŒå…¨APIã«é©ç”¨
- [ ] æœ¬ç•ªç’°å¢ƒã§ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹
- [ ] console.logæ–‡ãŒå‰Šé™¤æ¸ˆã¿
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«æ©Ÿå¯†æƒ…å ±ãªã—
- [ ] CORSè¨­å®šãŒé©åˆ‡
- [ ] CSPãƒ˜ãƒƒãƒ€ãƒ¼è¨­å®šæ¸ˆã¿
- [ ] ä¾å­˜é–¢ä¿‚ã®è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ

### å®šæœŸãƒã‚§ãƒƒã‚¯ï¼ˆæœˆæ¬¡ï¼‰

- [ ] APIã‚­ãƒ¼ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®ç›£æŸ»
- [ ] ç•°å¸¸ãªãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¢ºèª
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®é©ç”¨
- [ ] ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®æ¤œè¨¼
- [ ] ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œè¨ˆç”»ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼

## ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå¯¾å¿œ

### ğŸš¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆç™ºç”Ÿæ™‚

1. **å³åº§ã®å¯¾å¿œ**
   ```bash
   # 1. å½±éŸ¿ã‚’å—ã‘ãŸAPIã‚­ãƒ¼ã®ç„¡åŠ¹åŒ–
   # 2. ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°ã®ä¿å…¨
   # 3. å½±éŸ¿ç¯„å›²ã®ç‰¹å®š
   ```

2. **èª¿æŸ»**
   - ãƒ­ã‚°åˆ†æ
   - å½±éŸ¿ã‚’å—ã‘ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç‰¹å®š
   - æ”»æ’ƒãƒ™ã‚¯ã‚¿ãƒ¼ã®ç‰¹å®š

3. **å¾©æ—§**
   - æ–°ã—ã„APIã‚­ãƒ¼ã®ç™ºè¡Œ
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ‘ãƒƒãƒã®é©ç”¨
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥

4. **äº‹å¾Œå¯¾å¿œ**
   - ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
   - å†ç™ºé˜²æ­¢ç­–ã®å®Ÿè£…
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»ã®å®Ÿæ–½

## ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

### æ¨å¥¨ç›£è¦–é …ç›®

1. **ç•°å¸¸æ¤œçŸ¥**
   - å¤§é‡ã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆ
   - èªè¨¼å¤±æ•—ã®æ€¥å¢—
   - ç•°å¸¸ãªãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³

2. **ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**
   ```typescript
   // ä¾‹ï¼šãƒ¬ãƒ¼ãƒˆåˆ¶é™é•åã®ç›£è¦–
   if (rateLimitViolations > 100) {
     await sendAlert({
       type: 'SECURITY',
       severity: 'HIGH',
       message: 'Possible DDoS attack detected'
     });
   }
   ```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ„ãƒ¼ãƒ«

### æ¨å¥¨ãƒ„ãƒ¼ãƒ«

1. **è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³**
   ```bash
   npm audit
   npm audit fix
   ```

2. **ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯**
   ```bash
   npx depcheck
   npx npm-check-updates
   ```

3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æ¤œè¨¼**
   - [Security Headers](https://securityheaders.com/)
   - [SSL Labs](https://www.ssllabs.com/ssltest/)

## é€£çµ¡å…ˆ

ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å•é¡Œã®å ±å‘Šï¼š
- Email: security@example.com
- ç·Šæ€¥é€£çµ¡å…ˆ: [ç·Šæ€¥é€£çµ¡å…ˆãƒªã‚¹ãƒˆ]

## æ›´æ–°å±¥æ­´

- 2024-01-XX: åˆç‰ˆä½œæˆ
- 2024-01-XX: ãƒ¬ãƒ¼ãƒˆåˆ¶é™å®Ÿè£…è¿½åŠ 
- 2024-01-XX: ç’°å¢ƒå¤‰æ•°æ¤œè¨¼è¿½åŠ 

---

âš ï¸ **é‡è¦**: ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å®šæœŸçš„ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¯ç¶™ç¶šçš„ãªãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚